function queryParams(e){var a={};for(i in e)e[i]&&(a[i]=e[i]);return $("#toolbar").find("input[name]").each(function(){a[$(this).attr("name")]=$(this).val()}),a}function editFormatter(e,a){return"<a title='Edit' href='#' class='txtedit' data-toggle='modal' data-target='#Edit-modal'><i class='fa fa-edit fa-fw'></i></a>&nbsp;&nbsp;&nbsp;<a title='Change Password' href='#' class='changepwd' data-toggle='modal' data-target='#Password-modal'><i class='fa fa-key fa-fw'></i></a>&nbsp;&nbsp;&nbsp;<a title='Delete' href='#' class='delUser' data-toggle='modal' data-target='#Delete-modal'><i class='fa fa-trash-o fa-fw'></i></a>"}function roleFormatter(e,a){var i="";return"Branch_Loan_Officer"==a.Role?i="Branch Loan Officer":"Branch_Loan_Manager"==a.Role?i="Branch Loan Manager":"Admin"==a.Role?i="Admin":"HO_Admin"==a.Role?i="HO Admin":"Executive_Committee_SPOC"==a.Role?i="Executive Committee SPOC":"HO_Loan_Appraisal"==a.Role?i="HO Loan Appraisal":"HO_Loan_Manager"==a.Role?i="HO Loan Manager":"Mobile_Loan_Officer"==a.Role?i="Mobile Loan Officer":"Web_Loan_Officer"==a.Role?i="Web Loan Officer":"General_Manager"==a.Role?i="General Manager":"Loan_Recovery_Officer"==a.Role?i="Loan Recovery Officer":"Field_Officer"==a.Role?i="Field Officer":"Sr_Manager_Retail_Loan"==a.Role?i="Sr Manager Retail Loan":"Manager_Retail_Loan"==a.Role?i="Manager Retail Loan":"AGM_Finance"==a.Role?i="AGM Finance":"AGM_Banking"==a.Role?i="AGM Banking":"AGM_Retail"==a.Role?i="AGM Retail":"HO_Loan_Officer"==a.Role?i="HO Loan Officer":"Senior_Officer"==a.Role?i="Senior Officer":"Senior_Manager"==a.Role?i="Senior Manager":"Junior_Officer"==a.Role?i="Junior Officer":"Ho_Loan_Clerk"==a.Role?i="Ho Loan Clerk":"CEO"==a.Role&&(i="CEO"),i}var $table=$("#table");window.actionEvents={"click .txtedit":function(e,a,i,r){$("#Euid").val(i.ID),$("#Eemail").val(i.Email),$("#Efname").val(i.Firstname),$("#Elname").val(i.Lastname),$("#Ecuid").val(i.CKycUserId),$("div#divErle select").val(i.Role),$("div#divEbranchname select").val(i.BranchId),$("#EckycRcode").val(i.CKycRegionCode),$("#EckycBcode").val(i.CKycBranchCode),$("#EEmpCode").val(i.EmpCode),"Y"==i.IsLocked?$(".ISLOCKED").attr("checked",!0):"N"==i.IsLocked&&$(".ISLOCKED").attr("checked",!1)},"click .delUser":function(e,a,i,r){$("#deluid").val(i.ID)},"click .changepwd":function(e,a,i,r){$("#puserid").val(i.ID)}},$(function(){$("#Acuid").keyup(function(e){var a=$.trim($(this).val());if(""!=a){var i=/^[A-Za-z0-9]+$/;if(!i.test(a))return $("#Acuidinfo").show(),void $("#Acuidinfo").html("Only letters and numbers allowed (e.g. IRA000123).");$("#Acuidinfo").hide()}}),$("#Ecuid").keyup(function(e){var a=$.trim($(this).val());if(""!=a){var i=/^[A-Za-z0-9]+$/;if(!i.test(a))return $("#Ecuidinfo").show(),void $("#Ecuidinfo").html("Only letters and numbers allowed (e.g. IRA000123).");$("#Ecuidinfo").hide()}}),$("#Aemail").keyup(function(e){var a,i=$("#Aemail").val(),r=$("#Acname").val();a=""!=r||"undefined"!=r?"/check-email-status?email="+i+"&cname="+r:"/check-email-status?email="+i,$.ajax({method:"POST",url:a,data:$(this).serialize(),error:function(e,a,i){},success:function(e){1==e.s.c?($("#AemailSuccess").hide(),$("#AemailError").show(),$("#AemailError").html(e.s.m),$("#EmailResp").val("error")):($("#AemailError").hide(),$("#AemailSuccess").show(),$("#AemailSuccess").html(e.m),$("#EmailResp").val("success"))}})}),$("#formUser1").submit(function(e){if(e.preventDefault(),$("#formUser1 [required]").each(function(e){$(this).val().length<=0&&$(this).css({"border-color":"red"})}),"error"==$("#EmailResp").val())return $("#AemailError").hide(),$("#divAemailError").addClass("has-danger"),$("#AcuidError").show(),void $("#AcuidError").html($("#AemailError").text());if($("#pwd").val().length<6)$("#divaddpwdminlen").show();else if($("#pwd").val()==$("#confirmpwd").val()){var a=$("#Acuid").val();if(""!=a){var i=/^[A-Za-z0-9]+$/;if(!i.test(a))return $("#Acuidinfo").show(),void $("#Acuidinfo").html("Only letters and numbers allowed (e.g. IRA000123).");$("#Acuidinfo").hide()}$.ajax({method:"POST",url:"/add-update-user",data:$(this).serialize(),error:function(e,a,i){},success:function(e){1==e.s.c?($("#AcuidError").show(),$("#AcuidError").html(e.s.m)):($("#AcuidError").hide(),window.location.href="/users")}})}else $("#divpwd").show()}),$("#formUser2").submit(function(e){e.preventDefault(),$("#formUser2 [required]").each(function(e){$(this).val().length<=0&&$(this).css({"border-color":"red"})});var a=$("#Ecuid").val();if(""!=a){var i=/^[A-Za-z0-9]+$/;if(!i.test(a))return $("#Ecuidinfo").show(),void $("#Ecuidinfo").html("Only letters and numbers allowed (e.g. IRA000123).");$("#Ecuidinfo").hide()}$.ajax({method:"POST",url:"/add-update-user",data:$(this).serialize(),error:function(e,a,i){},success:function(e){1==e.s.c?($("#EcuidError").show(),$("#EcuidError").html(e.s.m)):($("#EcuidError").hide(),window.location.href="/users")}})}),$("#formPassword").submit(function(e){e.preventDefault(),$("#formPassword [required]").each(function(e){$(this).val().length<=0&&$(this).css({"border-color":"red"})});var a=$("#puserid").val(),i=$("#newpwd").val();i.length<6?$("#divpwdminlen").show():$("#newpwd").val()==$("#cnfirmpwd").val()?$.ajax({method:"POST",url:"/change-password?id="+a+"&password="+i,data:$(this).serialize(),error:function(e,a,i){},success:function(e){window.location.href="/users"}}):$("#divchangepwd").show()});var e=$(".deleteUser");e.click(function(){var e=$("#deluid").val();$.ajax({method:"POST",url:"/delete-user?id="+e,data:$(this).serialize(),error:function(e,a,i){},success:function(e){window.location.href="/users"}})}),$("#showpwd, #showchangepwd").hover(function(){$("#pwd, #confirmpwd, #newpwd, #cnfirmpwd").attr("type","text")},function(){$("#pwd, #confirmpwd, #newpwd, #cnfirmpwd").attr("type","password")}),$(".refreshApage").click(function(){window.location="/users"})});