function val(e){var t=e||window.event,a=t.keyCode||t.which;a=String.fromCharCode(a);var o=/^\d*\.?\d*$/;o.test(a)||8==e.keyCode||9==e.keyCode||17==e.keyCode||65==e.keyCode||97==e.keyCode||(t.returnValue=!1,t.preventDefault&&t.preventDefault())}function validate(e){var t=e||window.event,a=t.keyCode||t.which;a=String.fromCharCode(a);var o=/[0-9]|\%/;o.test(a)||8==e.keyCode||9==e.keyCode||93==e.keyCode||(t.returnValue=!1,t.preventDefault&&t.preventDefault())}function text(e){var t=e||window.event,a=t.keyCode||t.which;a=String.fromCharCode(a);var o=/^[a-zA-Z\s-, ]+$/;o.test(a)||8==e.keyCode||9==e.keyCode||93==e.keyCode||(t.returnValue=!1,t.preventDefault&&t.preventDefault())}function limitAlertStatus(){if("job(Salaried)"==$("#EmpType").val()){var e=$("#loanAmt").val();$("#actualLimitTxt").text(e),parseInt($("#actualLimitTxt").text())<=parseInt($("#ExLimit").text())?($("#LimitStatus").text("Met"),$("#LimitStatus").addClass("text-success"),$("#LimitStatus").removeClass("text-danger")):($("#LimitStatus").text("Not Met"),$("#LimitStatus").removeClass("text-success"),$("#LimitStatus").addClass("text-danger"))}else if("business(SelfEmployeed)"==$("#EmpType").val()){var t=$("#loanAmt").val(),a=$("#GrossTurnover").val(),o=$("#TotalAssets").val(),i=$("#StockBookDepth").val();$("#actualLimitTxt").text(t),parseFloat(t)<5*parseFloat(a)&&parseFloat(t)<.7*(parseFloat(o)+parseFloat(i))/2?($("#LimitStatus").text("Met"),$("#LimitStatus").addClass("text-success"),$("#LimitStatus").removeClass("text-danger")):($("#LimitStatus").text("Not Met"),$("#LimitStatus").removeClass("text-success"),$("#LimitStatus").addClass("text-danger"))}}function RCCriteria(){var e,t,a=$("#AnnIncome").val(),o=$("#NMI").val(),i=$("#CoApp1AnnIncome").val(),s=$("#CoApp1NMI").val(),r=$("#CoApp2AnnIncome").val(),n=$("#CoApp2NMI").val(),l=$("#EMI").val(),p=$("#OtherLoanFlag").val(),d=$("#TotalLoanEMI").val(),c=$("#CoApp1TotalLoanEMI").val(),u=$("#CoApp2TotalLoanEMI").val(),v=$("#IncomeDetail").text(),m=$("#MinIncome").text(),h=$("#MinEmi").text(),A=$("#LessIncome").text(),x=$("#GreaterIncome").text(),f=$("#BetweenEmi").text(),g=$("#AboveIncome").text(),C=$("#AboveEmi").text();if(0!=s&&0!=n?(e=parseFloat(a)+parseFloat(i)+parseFloat(r),t=parseFloat(o)+parseFloat(s)+parseFloat(n)):0!=s?(e=parseFloat(a)+parseFloat(i),t=parseFloat(o)+parseFloat(s)):(e=a,t=o),"Income"==v){if(e<=parseFloat(m)){if($("#ExIncome").text(m),""!=c&&""!=u&&""!=d)var F=parseFloat(t)-(parseFloat(d)+parseFloat(c)+parseFloat(u)),w=parseFloat(F)*(parseFloat(h)/100);else if(""!=c&&""!=d)F=parseFloat(t)-(parseFloat(d)+parseFloat(c)),w=parseFloat(F)*(parseFloat(h)/100);else if(1==p&&""!=d)F=parseFloat(t)-parseFloat(d),w=parseFloat(F)*(parseFloat(h)/100);else F=parseFloat(t),w=parseFloat(F)*(parseFloat(h)/100);w>=l?($("#IncomeStatus").text("Met"),$("#IncomeStatus").addClass("text-success"),$("#IncomeStatus").removeClass("text-danger")):($("#IncomeStatus").text("Not Met"),$("#IncomeStatus").removeClass("text-success"),$("#IncomeStatus").addClass("text-danger"))}else if(e>=parseFloat(A)&&e<=parseFloat(x)){if($("#ExIncome").text(">= "+A+" <= "+x),""!=c&&""!=u&&""!=d)F=parseFloat(t)-(parseFloat(d)+parseFloat(c)+parseFloat(u)),w=parseFloat(F)*(parseFloat(h)/100);else if(""!=c&&""!=d)F=parseFloat(t)-(parseFloat(d)+parseFloat(c)),w=parseFloat(F)*(parseFloat(h)/100);else if(1==p&&""!=d)F=parseFloat(t)-parseFloat(d),w=parseFloat(F)*(parseFloat(f)/100);else F=parseFloat(t),w=parseFloat(F)*(parseFloat(f)/100);w>=l?($("#IncomeStatus").text("Met"),$("#IncomeStatus").addClass("text-success"),$("#IncomeStatus").removeClass("text-danger")):($("#IncomeStatus").text("Not Met"),$("#IncomeStatus").removeClass("text-success"),$("#IncomeStatus").addClass("text-danger"))}else if(e>=parseFloat(g)){if($("#ExIncome").text(">= "+g),""!=c&&""!=u&&""!=d)F=parseFloat(t)-(parseFloat(d)+parseFloat(c)+parseFloat(u)),w=parseFloat(F)*(parseFloat(h)/100);else if(""!=c&&""!=d)F=parseFloat(t)-(parseFloat(d)+parseFloat(c)),w=parseFloat(F)*(parseFloat(h)/100);else if(1==p&&""!=d)F=parseFloat(t)-parseFloat(d),w=parseFloat(F)*(parseFloat(C)/100);else F=parseFloat(t),w=parseFloat(F)*(parseFloat(C)/100);w>=l?($("#IncomeStatus").text("Met"),$("#IncomeStatus").addClass("text-success"),$("#IncomeStatus").removeClass("text-danger")):($("#IncomeStatus").text("Not Met"),$("#IncomeStatus").removeClass("text-success"),$("#IncomeStatus").addClass("text-danger"))}}else if("IT Return"==v){if($("#ExIncome").text("-"),""!=c&&""!=u&&""!=d)F=parseFloat(t)-(parseFloat(d)+parseFloat(c)+parseFloat(u)),w=.6*parseFloat(F);else if(""!=c&&""!=d)F=parseFloat(t)-(parseFloat(d)+parseFloat(c)),w=.6*parseFloat(F);else if(1==p&&""!=d)F=parseFloat(t)-parseFloat(d),w=.6*parseFloat(F);else F=parseFloat(t),w=.6*parseFloat(F);w>=l?($("#IncomeStatus").text("Met"),$("#IncomeStatus").addClass("text-success"),$("#IncomeStatus").removeClass("text-danger")):($("#IncomeStatus").text("Not Met"),$("#IncomeStatus").removeClass("text-success"),$("#IncomeStatus").addClass("text-danger"))}}function MarginCal(){var e=$("#loanAmt").val();if(""!=$("#APropvalue1").val()){var t=parseFloat($("#APropvalue1").val())+parseFloat($("#Propvalue").val());console.log(t)}else{t=$("#Propvalue").val();console.log(t)}var a=(parseFloat(t)-parseFloat(e))/parseFloat(t)*100,o=a.toFixed(0);"business_use"!=$("#PersonalBusiness").val()&&($("#actualMargin").text(o),parseFloat(o)>=parseFloat($("#ExMargin").text())?($("#MarginStatus").text("Met"),$("#MarginStatus").addClass("text-success"),$("#MarginStatus").removeClass("text-danger")):($("#MarginStatus").text("Not Met"),$("#MarginStatus").removeClass("text-success"),$("#MarginStatus").addClass("text-danger")))}function processingFeeDisplay(){var e=0;if(""!=$("#plt").val()&&"personal_use"==$("#PersonalBusiness").val()){var t=$("#plt").val();e=t}if(""!=$("#blt").val()&&"business_use"==$("#PersonalBusiness").val()){var a=$("#blt").val();e=a}e>0&&$.ajax({method:"GET",url:"/eligibility-data?loanTypeId="+e,data:$(this).serialize(),error:function(e,t,a){},success:function(e){if($("#processing").hide(),0==e.s.c&&""!=e.d.LoanNameType){var t=e.d.LoanNameType;-1!=t.toLowerCase().indexOf("housing loan")?($("#processFeeDrop").show(),$("#processFeeText").val(""),$("#processFeeText").hide(),parseFloat($("#loanAmt").val())>=15e5?($("#processFeeDrop").val(""),$("#processFeeDrop").val("0.5").select()):parseFloat($("#loanAmt").val())>=6e5&&parseFloat($("#loanAmt").val())<15e5?($("#processFeeDrop").val(""),$("#processFeeDrop").val("0.25").select()):parseFloat($("#loanAmt").val())>=0&&parseFloat($("#loanAmt").val())<6e5&&($("#processFeeDrop").val(""),$("#processFeeDrop").val("0.0").select())):-1!=t.toLowerCase().indexOf("security")?($("#processFeeDrop").show(),$("#processFeeText").val(""),$("#processFeeText").hide(),$("#loanAmt").val()>=15e5?($("#processFeeDrop").val(""),$("#processFeeDrop").val("0.5").select()):($("#processFeeDrop").val(""),$("#processFeeDrop").hide(),$("#processFeeText").show(),e.d.ProcessingFee>0?$("#processFeeText").val(e.d.ProcessingFee):$("#processFeeText").val("0.5"))):($("#processFeeDrop").val(""),$("#processFeeDrop").hide(),$("#processFeeText").show(),e.d.ProcessingFee>=0?$("#processFeeText").val(e.d.ProcessingFee):$("#processFeeText").val("0.5"))}}})}function processingFeeAlert(){"0.5"!=$("#processFeeDrop option:selected").val()&&parseFloat($("#loanAmt").val())>=15e5&&-1!=$("#plt option:selected").text().toLowerCase().indexOf("housing loan")?($("#divProFeeAlert").show(),$("#ProFeeReqAlert").attr("required",!0)):"0.5"!=$("#processFeeDrop option:selected").val()&&parseFloat($("#loanAmt").val())>=15e5&&-1!=$("#blt option:selected").text().toLowerCase().indexOf("security")?($("#divProFeeAlert").show(),$("#ProFeeReqAlert").attr("required",!0)):($("#ProFeeReqAlert").val(""),$("#ProFeeReqAlert").attr("required",!1),$("#divProFeeAlert").hide())}function showpay(){var e=$("#loanAmt").val(),t=$("#loanMnth").val(),a=$("#loanYears").val(),o=$("#interest").val(),i=($("#plt").val(),"true");if("business_use"!=$("#PersonalBusiness").val()&&($("#actualLimitTxt").text(e),parseInt($("#actualLimitTxt").text())<=parseInt($("#ExLimit").text())?($("#LimitStatus").text("Met"),$("#LimitStatus").addClass("text-success"),$("#LimitStatus").removeClass("text-danger")):($("#LimitStatus").text("Not Met"),$("#LimitStatus").removeClass("text-success"),$("#LimitStatus").addClass("text-danger"))),MarginCal(),"business_use"!=$("#PersonalBusiness").val()&&RCCriteria(),"true"==i)if(null!=e&&0!=e.length&&(null!=t&&0!=t.length||null!=a&&0!=a.length)&&null!=o&&0!=o.length){var s=parseFloat(e),r=parseFloat(t),n=parseFloat(a),l=parseFloat(o),p=l/1200;if("cc_od"==$("#interestType").val()){var d=s*(l/100)*n,c=d/12;$("#MonthlyInterest").val(c.toFixed(0)),$("#TotalPayout").val(s+d)}else d=s*p/(1-Math.pow(1/(1+p),r));var u=d.toFixed(0);$("#EMI").val(u),$("#divEMI").text(u)}else $("#EMI").val("Incomplete data")}function loanLimitAlert(e){var t="";t="Loan amount should be less than "+e,$("#LoanAmtErro").show(),$("#LoanAmtErro").text(t),$("#EMI").val(""),$("#LoanAmtErro").fadeIn().fadeOut(3e3)}function StaffFieldDisp(){-1==$("#plt option:selected").text().toLowerCase().indexOf("stf")&&-1==$("#plt option:selected").text().toLowerCase().indexOf("staff")||"personal_use"!=$("#PersonalBusiness option:selected").val()?($("#StaffIndexNo").hide(),$("#StaffDesignation").hide(),$("#divGuarantorInfo").hide(),$("#StaffJoinDate").hide(),$("#StaffRetireDate").hide()):($("#StaffIndexNo").show(),$("#StaffDesignation").show(),$("#divGuarantorInfo").show(),$("#StaffJoinDate").show(),$("#StaffRetireDate").show()),(-1!=$("#plt option:selected").text().toLowerCase().indexOf("stf")||-1!=$("#plt option:selected").text().toLowerCase().indexOf("staff")&&-1!=$("#plt option:selected").text().toLowerCase().indexOf("hous"))&&"personal_use"==$("#PersonalBusiness option:selected").val()?$("#divStaffHouse").show():$("#divStaffHouse").hide(),(-1!=$("#plt option:selected").text().toLowerCase().indexOf("stf")||-1!=$("#plt option:selected").text().toLowerCase().indexOf("staff")&&-1!=$("#plt option:selected").text().toLowerCase().indexOf("vehicle"))&&"personal_use"==$("#PersonalBusiness option:selected").val()?$("#divStaffVehicle").show():$("#divStaffVehicle").hide();var e=b_year+58;if(""!=e||"NaN"!=e){var t=b_date+"/"+b_month+"/"+e;$("#DOR").val(t),console.log(t)}else $("#DOR").val("")}function ApplicationInfo(e){"req"==e?($("#divAppInfo :input").attr("required",!0),$(".opInput").removeAttr("required"),$("#ProprietorDetailDiv :input").removeAttr("required")):"opt"==e&&$("#divAppInfo :input").removeAttr("required")}var b_date,b_month,b_year,applicantInfoFlgVal="";$("#Propvalue").keyup(function(e){MarginCal()}),$("#APropvalue1").keyup(function(e){MarginCal()}),$("#LimitStatus").text("Not Met"),$("#MarginStatus").text("Not Met"),$("#AgeStatus").text("Not Met"),$("#IncomeStatus").text("Not Met"),$("#loanAmt").keyup(function(e){$(this).val();"business_use"!=$("#PersonalBusiness").val()&&limitAlertStatus()}),$("#processFeeDrop").on("change",function(){processingFeeAlert()}),$("#loanAmt").focusout(function(){processingFeeDisplay(),parseFloat($("#loanAmt").val())<15e5&&processingFeeAlert()}),$("#QuotationAmt").focusout(function(){var e=$("#QuotationAmt").val(),t=.85*e;$("#QuotationAmtPer").val(t)}),$("#PersonalBusiness").on("change",function(){"personal_use"==this.value?($("#ProprietorDetailDiv").hide(),$("#DivPacsName").hide()):"business_use"==this.value&&(-1!=$("#blt option:selected").text().toLowerCase().indexOf("cash credit")||-1!=$("#blt option:selected").text().toLowerCase().indexOf("hypothecation")?($("#ProprietorDetailDiv").show(),$("#DivPacsName").hide()):-1!=$("#blt option:selected").text().toLowerCase().indexOf("society")||-1!=$("#blt option:selected").text().toLowerCase().indexOf("soc")||-1!=$("#blt option:selected").text().toLowerCase().indexOf("milk")?($("#ProprietorDetailDiv").hide(),$("#DivPacsName").show()):($("#ProprietorDetailDiv").hide(),$("#DivPacsName").hide()))}),$("#blt").on("change",function(){"business_use"==$("#PersonalBusiness").val()&&(-1!=$("#blt option:selected").text().toLowerCase().indexOf("cash credit")||-1!=$("#blt option:selected").text().toLowerCase().indexOf("hypothecation")?$("#ProprietorDetailDiv").show():$("#ProprietorDetailDiv").hide(),-1!=$("#blt option:selected").text().toLowerCase().indexOf("society")||-1!=$("#blt option:selected").text().toLowerCase().indexOf("soc")||-1!=$("#blt option:selected").text().toLowerCase().indexOf("milk")?($("#ProprietorDetailDiv").hide(),$("#DivPacsName").show()):$("#DivPacsName").hide())}),$(document).ready(function(){$("#divAddNewSection").click(function(){$("#divRemoveNewSection").show(),$("#divNewMortgageSection").show(),$("#divAddNewSection").hide()}),$("#divRemoveNewSection").click(function(){$("#divNewMortgageSection").hide(),$("#divRemoveNewSection").hide(),$("#divAddNewSection").show(),$("#divNewMortgageSection").find("input:text").val(""),MarginCal()}),$("#divAddNewCoAppSection").click(function(){$("#divNewCoAppSection").show(),$("#divRemoveNewCoAppSection").show(),$("#divAddAnotherCoAppSection").show(),$("#divAddNewCoAppSection").hide(),$("#divRemoveAnotherCoAppSection").hide()}),$("#divRemoveNewCoAppSection").click(function(){$("#divRemoveNewCoAppSection").hide(),$("#divNewCoAppSection").hide(),$("#divAnotherCoAppSection").hide(),$("#divAddNewCoAppSection").show(),$("#divNewCoAppSection").find("input:text").val(""),$("#divAnotherCoAppSection").find("input:text").val(""),RCCriteria()}),$("#divAddAnotherCoAppSection").click(function(){$("#divAnotherCoAppSection").show(),$("#divRemoveAnotherCoAppSection").show(),$("#divAddAnotherCoAppSection").hide()}),$("#divRemoveAnotherCoAppSection").click(function(){$("#divRemoveAnotherCoAppSection").hide(),$("#divAnotherCoAppSection").hide(),$("#divAddAnotherCoAppSection").show(),$("#divAnotherCoAppSection").find("input:text").val(""),RCCriteria()}),$("#DOB").datepicker().on("change",function(e){var t=$(this).val(),a=t.split("/"),o=new Date(a[2],a[1]-1,a[0]),i=new Date,s=i.getDate(),r=i.getMonth()+1,n=i.getFullYear();b_date=o.getDate(),b_month=o.getMonth()+1,b_year=o.getFullYear();var l=n-b_year;(r<b_month||r==b_month&&s<b_date)&&l--,"business_use"!=$("#PersonalBusiness").val()&&($("#actualAge").html(l),$("#actualAge").val(l),l<=$("#ExAge").text()?($("#AgeStatus").text("Met"),$("#AgeStatus").removeClass("text-danger"),$("#AgeStatus").addClass("text-success")):($("#AgeStatus").text("Not Met"),$("#AgeStatus").removeClass("text-success"),$("#AgeStatus").addClass("text-danger"))),StaffFieldDisp()});var e=!1,t=!1,a=!1,o=!1,i=!1,s=!1;$("#PhNo").keyup(function(t){var a=$.trim($(this).val());if(""!=a){var o=/^[6-9]\d{9}$/;if(!o.test(a))return $("#pherror").show(),$("#pherror").html("(Mobile no. start with 6/7/8/9.)"),void(e=!0);e=!1,$("#pherror").hide()}}),$("#CoApp1PhNo").keyup(function(e){var a=$.trim($(this).val());if(""!=a){var o=/^[6-9]\d{9}$/;if(!o.test(a))return $("#CoApp1pherror").show(),$("#CoApp1pherror").html("(Mobile no. start with 6/7/8/9.)"),void(t=!0);t=!1,$("#CoApp1pherror").hide()}}),$("#CoApp2PhNo").keyup(function(e){var t=$.trim($(this).val());if(""!=t){var o=/^[6-9]\d{9}$/;if(!o.test(t))return $("#CoApp2pherror").show(),$("#CoApp2pherror").html("(Mobile no. start with 6/7/8/9.)"),void(a=!0);a=!1,$("#CoApp2pherror").hide()}}),$("#PanNo").keyup(function(e){var t=$.trim($(this).val());if(""!=t){var a=/^([a-zA-Z]{5})(\d{4})([a-zA-Z]{1})$/;if(!a.test(t))return $("#panError").show(),$("#panError").html("(Enter Valid Pan Number.)"),void(o=!0);o=!1,$("#panError").hide()}}),$("#CoApp1PanNo").keyup(function(e){var t=$.trim($(this).val());if(""!=t){var a=/^([a-zA-Z]{5})(\d{4})([a-zA-Z]{1})$/;if(!a.test(t))return $("#CoApp1panError").show(),$("#CoApp1panError").html("(Enter Valid Pan Number.)"),void(i=!0);i=!1,$("#CoApp1panError").hide()}}),$("#CoApp2PanNo").keyup(function(e){var t=$.trim($(this).val());if(""!=t){var a=/^([a-zA-Z]{5})(\d{4})([a-zA-Z]{1})$/;if(!a.test(t))return $("#CoApp2panError").show(),$("#CoApp2panError").html("(Enter Valid Pan Number.)"),void(s=!0);s=!1,$("#CoApp2panError").hide()}}),$("#btnfinalSubmit").click(function(){var r=!1;if($("#FormLoan [required]").each(function(e){$(this).val().length<=0&&($(this).css({"border-color":"red"}),r=!0)}),1==e)return $("#ASubmitError").show(),void $("#ASubmitError").html("Enter Valid Mobile Number, start with 6/7/8/9.");if(1==o)return $("#ASubmitError").show(),void $("#ASubmitError").html("Enter Valid Pan Number.");if(""!=$("#CoApp1Name").val){if(1==t)return $("#ASubmitError").show(),void $("#ASubmitError").html("First Co-Applicant - Enter Valid Mobile Number, start with 6/7/8/9.");if(1==i)return $("#ASubmitError").show(),void $("#ASubmitError").html("First Co-Applicant - Enter Valid Pan Number.")}if(""!=$("#CoApp2Name").val){if(1==a)return $("#ASubmitError").show(),void $("#ASubmitError").html("Second Co-Applicant - Enter Valid Mobile Number, start with 6/7/8/9.");if(1==s)return $("#ASubmitError").show(),void $("#ASubmitError").html("Second Co-Applicant - Enter Valid Pan Number.")}if(1==r)return $("#ASubmitError").show(),void $("#ASubmitError").html("Required fields information are missing inside Loan Request/Applicant Basic Information. Please click to view errors!!!");$("#ASubmitError").hide(),"business_use"!=$("#PersonalBusiness").val()&&limitAlertStatus(),"Not Met"==$("#LimitStatus").text()?($("#limitEligible").text("Actual Limit Eligibility Not Met"),$("#limitEligible").removeClass("text-success"),$("#limitEligible").addClass("text-danger")):($("#limitEligible").text("Actual Limit Eligibility Met"),$("#limitEligible").addClass("text-success"),$("#limitEligible").removeClass("text-danger")),"Not Met"==$("#MarginStatus").text()?($("#marginEligible").text("Actual Margin Eligibility Not Met"),$("#marginEligible").removeClass("text-success"),$("#marginEligible").addClass("text-danger")):($("#marginEligible").text("Actual Margin Eligibility Met"),$("#marginEligible").addClass("text-success"),$("#marginEligible").removeClass("text-danger")),"Not Met"==$("#AgeStatus").text()?($("#ageEligible").text("Age Eligibility Not Met"),$("#ageEligible").removeClass("text-success"),$("#ageEligible").addClass("text-danger")):($("#ageEligible").text("Age Eligibility Met"),$("#ageEligible").removeClass("text-danger"),$("#ageEligible").addClass("text-success")),"Not Met"==$("#IncomeStatus").text()?($("#incomeEligible").text("Income Eligibility Not Met"),$("#incomeEligible").removeClass("text-success"),$("#incomeEligible").addClass("text-danger")):"On the basis of Income Tax Return"==$("#IncomeStatus").text()?$("#incomeEligible").text("On the basis of Income Tax Return"):($("#incomeEligible").text("Income Eligibility Met"),$("#incomeEligible").addClass("text-success"),$("#incomeEligible").removeClass("text-danger")),"business_use"!=$("#PersonalBusiness").val()&&RCCriteria(),$("#loan-modal").modal()}),$("#PersonalBusiness").on("change",function(){if("personal_use"==this.value){var e=$("#interestType").val();if(""!=e)$("#interestType").val("");$("#personalLoan").show()}else $("#personalLoan").hide();StaffFieldDisp()}),$("#personalLoan").on("change",function(){""!=this.value&&$("#loanAmt").removeAttr("disabled")}),$("#businessLoan").on("change",function(){""!=this.value&&$("#loanAmt").removeAttr("disabled")}),$("#PersonalBusiness").on("change",function(){"business_use"==this.value?($("#businessLoan").show(),$("#applicationType").show(),$("#divinterestType").show(),$("#EmpType").find("option:contains(Job (Salaried))").hide(),$("#CoApp1EmpType").find("option:contains(Job (Salaried))").hide(),$("#CoApp2EmpType").find("option:contains(Job (Salaried))").hide(),$("#LimitStatus").text("Met").addClass("text-success").removeClass("text-danger"),$("#MarginStatus").text("Met").addClass("text-success").removeClass("text-danger"),$("#AgeStatus").text("Met").addClass("text-success").removeClass("text-danger"),$("#IncomeStatus").text("Met").addClass("text-success").removeClass("text-danger"),$("#actualAge").text("As Per Appraisal"),$("#actualMargin").text("As Per Appraisal"),$("#actualLimitTxt").text("As Per Appraisal"),$("#actualIncome").text("As Per Appraisal")):($("#businessLoan").hide(),$("#applicationType").hide(),$("#divinterestType").hide(),$("#EmpType").find("option:contains(Job (Salaried))").show(),$("#CoApp1EmpType").find("option:contains(Job (Salaried))").show(),$("#CoApp2EmpType").find("option:contains(Job (Salaried))").show(),$("#LimitStatus").text("Not Met").addClass("text-danger").removeClass("text-success"),$("#MarginStatus").text("Not Met").addClass("text-danger").removeClass("text-success"),$("#AgeStatus").text("Not Met").addClass("text-danger").removeClass("text-success"),$("#IncomeStatus").text("Not Met").addClass("text-danger").removeClass("text-success"),$("#DOB").val(""),$("#loanAmt").val(""),$("#Propvalue").val(""),$("#APropvalue1").val(""),$("#AnnIncome").val(""),$("#NMI").val(""),$("#TotalLoanEMI").val(""),$("#actualAge").text(""),$("#actualMargin").text(""),$("#actualLimitTxt").text(""),$("#actualIncome").text("")),"cc_od"==$("#interestType").val()?($("#emi").hide(),$("#divMonthPeriod").hide(),$("#annualinterest").show(),$("#divYearPeriod").show(),$("#divMonthlyInterest").show(),$("#divTotalPay").show()):($("#emi").show(),$("#divMonthPeriod").show(),$("#annualinterest").hide(),$("#divYearPeriod").hide(),$("#divMonthlyInterest").hide(),$("#divTotalPay").hide())}),$("#interestType").on("change",function(){"cc_od"==this.value?($("#emi").hide(),$("#divMonthPeriod").hide(),$("#annualinterest").show(),$("#divYearPeriod").show(),$("#divMonthlyInterest").show(),$("#divTotalPay").show()):($("#emi").show(),$("#divMonthPeriod").show(),$("#annualinterest").hide(),$("#divYearPeriod").hide(),$("#divMonthlyInterest").hide(),$("#divTotalPay").hide())}),$("#OtherLoanFlag").on("change",function(){"business_use"!=$("#PersonalBusiness").val()&&RCCriteria(),"1"==this.value?($("#loanEmi").show(),$("#emiRemarks").show()):($("#loanEmi").hide(),$("#emiRemarks").hide())}),$("#CoApp1OtherLoanFlag").on("change",function(){"1"==this.value?($("#CoApp1loanEmi").show(),$("#CoApp1emiRemarks").show()):($("#CoApp1loanEmi").hide(),$("#CoApp1emiRemarks").hide())}),$("#CoApp2OtherLoanFlag").on("change",function(){"1"==this.value?($("#CoApp2loanEmi").show(),$("#CoApp2emiRemarks").show()):($("#CoApp2loanEmi").hide(),$("#CoApp2emiRemarks").hide())}),$("#TotalLoanEMI").focusout(function(){"business_use"!=$("#PersonalBusiness").val()&&RCCriteria()}),$("#FormLoan").submit(function(e){e.preventDefault(),$("#FormLoan [required]").each(function(e){$(this).val().length<=0&&$(this).css({"border-color":"red"})});var t=$("#LimitStatus").text(),a=$("#MarginStatus").text(),o=$("#AgeStatus").text(),i=$("#IncomeStatus").text(),s=$("#actualMargin").text();$.ajax({method:"POST",url:"/add-loan-info?limitTxt="+t+"&marginTxt="+a+"&ageTxt="+o+"&incomeTxt="+i+"&loanMargin="+s,data:$(this).serialize(),error:function(e,t,a){},success:function(e){$("#processing").hide(),0==e.s.c&&($("#loan-modal").modal("toggle"),$("#ASubmitSuccess").show(),$("#ASubmitSuccess").html("Submitted successfully. New Loan Case ID is: "+e.d+"!!!"))}})}),$(".btnloansubmit").click(function(){$("#processing").show(),$("#FormLoan").submit()}),$("#EmpType").on("change",function(){"business(SelfEmployeed)"==this.value?($("#divAssets").show(),$("#divTurnover").show(),$("#divDepth").show()):($("#divAssets").hide(),$("#divTurnover").hide(),$("#divDepth").hide())}),$("#CoApp1EmpType").on("change",function(){"business(SelfEmployeed)"==this.value?($("#divCoApp1Assets").show(),$("#divCoApp1Turnover").show(),$("#divCoApp1Depth").show()):($("#divCoApp1Assets").hide(),$("#divCoApp1Turnover").hide(),$("#divCoApp1Depth").hide())}),$("#CoApp2EmpType").on("change",function(){"business(SelfEmployeed)"==this.value?($("#divCoApp2Assets").show(),$("#divCoApp2Turnover").show(),$("#divCoApp2Depth").show()):($("#divCoApp2Assets").hide(),$("#divCoApp2Turnover").hide(),$("#divCoApp2Depth").hide())}),$("#RelWithBank").on("change",function(){"No_Relationship"==this.value?$("#AccountNum").hide():$("#AccountNum").show()}),$("#CoApp1RelWithBank").on("change",function(){"No_Relationship"==this.value?$("#CoApp1AccountNum").hide():$("#CoApp1AccountNum").show()}),$("#CoApp2RelWithBank").on("change",function(){"No_Relationship"==this.value?$("#CoApp2AccountNum").hide():$("#CoApp2AccountNum").show()}),$("#plt").on("change",function(){var e=$("#plt").val();$("#table-eligibility").show(),processingFeeDisplay(),processingFeeAlert(),StaffFieldDisp(),$.ajax({method:"GET",url:"/get-roi-val?loanTypeId="+e,data:$(this).serialize(),error:function(e,t,a){},success:function(e){$("#processing").hide(),0==e.s.c&&(e.d.RoiRate>0?$("#interest").val(e.d.RoiRate):$("#interest").val("10"))}}),$.ajax({method:"GET",url:"/get-app-info-flg?loanTypeId="+e,data:$(this).serialize(),error:function(e,t,a){},success:function(e){$("#processing").hide(),0==e.s.c&&(""!=e.d.ApplicantInfoFlg?(applicantInfoFlgVal=e.d.ApplicantInfoFlg,ApplicationInfo(applicantInfoFlgVal)):(applicantInfoFlgVal="req",ApplicationInfo(applicantInfoFlgVal)))}}),$.ajax({method:"GET",url:"/eligibility-data?loanTypeId="+e,data:$(this).serialize(),error:function(e,t,a){},success:function(e){if($("#processing").hide(),0==e.s.c)if(e.d.LoanLimit>0&&$("#ExLimit").text(e.d.LoanLimit),e.d.LoanMargin>0&&$("#ExMargin").text(e.d.LoanMargin),e.d.Income,e.d.Age>0&&$("#ExAge").text(e.d.Age),""!=e.d.IncomeCriteria&&$("#IncomeDetail").text(e.d.IncomeCriteria),e.d.MinIncome>0&&$("#MinIncome").text(e.d.MinIncome),e.d.MinEmi>0&&$("#MinEmi").text(e.d.MinEmi),e.d.LessIncome>0&&$("#LessIncome").text(e.d.LessIncome),e.d.GreaterIncome>0&&$("#GreaterIncome").text(e.d.GreaterIncome),e.d.BetweenEmi>0&&$("#BetweenEmi").text(e.d.BetweenEmi),e.d.AboveIncome>0&&$("#AboveIncome").text(e.d.AboveIncome),e.d.AboveEmi>0&&$("#AboveEmi").text(e.d.AboveEmi),""!=e.d.LoanNameType&&(loanName=e.d.LoanNameType),""!=e.d.Alert){$("#AlertDetail").show();var t="("+e.d.Alert+")";$("#AlertDetail").html(t)}else $("#AlertDetail").hide()}})}),$("#blt").on("change",function(){var e=$("#blt").val();$("#table-eligibility").show(),processingFeeDisplay(),processingFeeAlert(),StaffFieldDisp(),$.ajax({method:"GET",url:"/get-roi-val?loanTypeId="+e,data:$(this).serialize(),error:function(e,t,a){},success:function(e){$("#processing").hide(),e.d.RoiRate>0?$("#interest").val(e.d.RoiRate):$("#interest").val("10")}}),$.ajax({method:"GET",url:"/eligibility-data?loanTypeId="+e,data:$(this).serialize(),error:function(e,t,a){},success:function(e){if($("#processing").hide(),0==e.s.c)if(e.d.LoanLimit>0&&$("#ExLimit").text(e.d.LoanLimit),e.d.LoanMargin>0&&$("#ExMargin").text(e.d.LoanMargin),e.d.Income,e.d.Age>0&&$("#ExAge").text(e.d.Age),""!=e.d.IncomeCriteria&&$("#IncomeDetail").text(e.d.IncomeCriteria),e.d.MinIncome>0&&$("#MinIncome").text(e.d.MinIncome),e.d.MinEmi>0&&$("#MinEmi").text(e.d.MinEmi),e.d.LessIncome>0&&$("#LessIncome").text(e.d.LessIncome),e.d.GreaterIncome>0&&$("#GreaterIncome").text(e.d.GreaterIncome),e.d.BetweenEmi>0&&$("#BetweenEmi").text(e.d.BetweenEmi),e.d.AboveIncome>0&&$("#AboveIncome").text(e.d.AboveIncome),e.d.AboveEmi>0&&$("#AboveEmi").text(e.d.AboveEmi),""!=e.d.LoanNameType&&(loanName=e.d.LoanNameType),""!=e.d.Alert){$("#AlertDetail1").show();var t="("+e.d.Alert+")";$("#AlertDetail1").html(t)}else $("#AlertDetail1").hide()}}),$.ajax({method:"GET",url:"/get-app-info-flg?loanTypeId="+e,data:$(this).serialize(),error:function(e,t,a){},success:function(e){$("#processing").hide(),0==e.s.c&&(""!=e.d.ApplicantInfoFlg?(applicantInfoFlgVal=e.d.ApplicantInfoFlg,ApplicationInfo(applicantInfoFlgVal)):(applicantInfoFlgVal="req",ApplicationInfo(applicantInfoFlgVal)))}})}),$("#AnnIncome").focusout(function(){var e=$("#AnnIncome").val(),t=(e/12).toFixed(0);$("#NMI").val(t),"business_use"!=$("#PersonalBusiness").val()&&($("#actualIncome").text(e),RCCriteria())}),$("#CoApp1AnnIncome").focusout(function(){var e=$("#CoApp1AnnIncome").val(),t=(e/12).toFixed(0);$("#CoApp1NMI").val(t),"business_use"!=$("#PersonalBusiness").val()&&RCCriteria()}),$("#CoApp2AnnIncome").focusout(function(){var e=$("#CoApp2AnnIncome").val(),t=(e/12).toFixed(0);$("#CoApp2NMI").val(t),"business_use"!=$("#PersonalBusiness").val()&&RCCriteria()}),$("#ProType").on("change",function(){"Vehicle"==this.value?($("#divOwner").hide(),$("#propertyDetailLabel").hide(),$("#propertyValLabel").hide(),$("#divSeller").show(),$("#showroomPriceLabel").show(),$("#Propvalue").attr("placeholder","Enter Ex-Showroom Price"),$("#makeModelLabel").show(),$("#PropDetails").attr("placeholder","Enter Make and Model"),$("#divProDetail").show(),$("#divProVal").show()):($("#divOwner").show(),$("#propertyDetailLabel").show(),$("#propertyValLabel").show(),$("#divProDetail").show(),$("#divProVal").show(),$("#divSeller").hide(),$("#showroomPriceLabel").hide(),$("#Propvalue").attr("placeholder","Enter Total Property Value"),$("#makeModelLabel").hide(),$("#PropDetails").attr("placeholder","Enter Property Details"))}),$("#AProType1").on("change",function(){"Vehicle"==this.value?($("#divOwner1").hide(),$("#propertyDetailLabel1").hide(),$("#propertyValLabel1").hide(),$("#divSeller1").show(),$("#showroomPriceLabel1").show(),$("#APropvalue1").attr("placeholder","Enter Ex-Showroom Price"),$("#makeModelLabel1").show(),$("#PropDetails1").attr("placeholder","Enter Make and Model"),$("#divProDetail1").show(),$("#divProVal1").show()):($("#divOwner1").show(),$("#propertyDetailLabel1").show(),$("#propertyValLabel1").show(),$("#divProDetail1").show(),$("#divProVal1").show(),$("#divSeller1").hide(),$("#showroomPriceLabel1").hide(),$("#APropvalue1").attr("placeholder","Enter Total Property Value"),$("#makeModelLabel1").hide(),$("#PropDetails1").attr("placeholder","Enter Property Details"))})});